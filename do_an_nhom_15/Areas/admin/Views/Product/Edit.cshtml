@{
    ViewData["Title"] = "Edit";
}
@model do_an_nhom_15.Models.Product

<div class="container mt-5 ">
    <h2 class="m-4">Edit Product</h2>
    <form asp-action="Edit" class="p-4 text-white bg-secondary">
        <input type="hidden" asp-for="ProductId" />
        <div class="mb-3">
            <label for="Name" class="form-label">Product Name</label>
            <input type="text" class="form-control text-white" asp-for="Name" value="@Model.Name">
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label for="Description" class="form-label">Description</label>
            <textarea class="form-control text-white" asp-for="Description">@Model.Description</textarea>
            <span asp-validation-for="Description" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label for="Price" class="form-label">Price</label>
            <input type="number" class="form-control text-white" asp-for="Price" step="0.01" value="@Model.Price">
            <span asp-validation-for="Price" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label for="Discount" class="form-label">Discount</label>
            <input type="number" class="form-control text-white" asp-for="Discount" step="0.01" value="@Model.Discount">
            <span asp-validation-for="Discount" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label for="Stock" class="form-label">Stock</label>
            <input type="number" class="form-control text-white" asp-for="Stock" value="@Model.Stock">
            <span asp-validation-for="Stock" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label for="ImageUrl" class="form-label">Image</label>

            <img src="@Url.Content(Model.ImageUrl ?? "~/images/default.png")"
                 alt="Current Image" id="imgPreview" width="200" class="mb-3"
                 onclick="document.getElementById('imageUpload').click()" style="cursor:pointer;" />
        </div>

        <!-- Hidden file input to select the image -->
        <input type="file" id="imageUpload" name="imageFile" accept="image/*" style="display:none;" onchange="previewImage(event)">
        <input type="hidden" asp-for="ImageUrl" />
        <span asp-validation-for="ImageUrl" class="text-danger"></span>

        <input type="hidden" class="form-control text-white" asp-for="Rating" >

        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a class="btn btn-outline-secondary" asp-action="Index">Cancel</a>
    </form>
</div>
<script>
    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function () {
            document.getElementById('imgPreview').src = reader.result;
        }
        reader.readAsDataURL(event.target.files[0]);
    }
</script>